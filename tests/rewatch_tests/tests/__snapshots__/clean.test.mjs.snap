// Vitest Snapshot v1, https://vitest.dev/guide/snapshot.html

exports[`clean > cleans build artifacts 1`] = `
[
  "rewatch.build[working_dir=.]",
  "  initialize_build",
  "    packages.make",
  "      build.load_package_sources[package=@rewatch-test/app]",
  "      build.load_package_sources[package=@rewatch-test/library]",
  "      build.load_package_sources[package=rewatch-test-fixture]",
  "    packages.parse_packages",
  "    clean.cleanup_previous_build",
  "  incremental_build[module_count=3]",
  "    build.parse[dirty_modules=3]",
  "      build.parse_file[module=App, package=@rewatch-test/app]",
  "      build.parse_file[module=Library, package=@rewatch-test/library]",
  "      build.parse_file[module=Root, package=rewatch-test-fixture]",
  "    build.compile",
  "      build.compile_wave[file_count=1]",
  "        build.compile_file[module=Library, package=@rewatch-test/library, suffix=.mjs, module_system=esmodule]",
  "      build.compile_wave[file_count=1]",
  "        build.compile_file[module=App, package=@rewatch-test/app, suffix=.mjs, module_system=esmodule]",
  "      build.compile_wave[file_count=1]",
  "        build.compile_file[module=Root, package=rewatch-test-fixture, suffix=.mjs, module_system=esmodule]",
  "rewatch.clean[working_dir=.]",
  "  clean.clean",
  "    packages.make",
  "      build.load_package_sources[package=@rewatch-test/app]",
  "      build.load_package_sources[package=@rewatch-test/library]",
  "      build.load_package_sources[package=rewatch-test-fixture]",
  "    packages.parse_packages",
]
`;

exports[`clean > cleans dependency build artifacts from node_modules 1`] = `
[
  "rewatch.build[working_dir=.]",
  "  initialize_build",
  "    packages.make",
  "      build.load_package_sources[package=@rewatch-test/with-deps]",
  "      build.load_package_sources[package=rescript-bun]",
  "    packages.parse_packages",
  "    clean.cleanup_previous_build",
  "  incremental_build[module_count=52]",
  "    build.parse[dirty_modules=51]",
  "      build.parse_file[module=Assert-RescriptBun, package=rescript-bun]",
  "      build.parse_file[module=AsyncHooks-RescriptBun, package=rescript-bun]",
  "      build.parse_file[module=BinaryLike-RescriptBun, package=rescript-bun]",
  "      build.parse_file[module=Buffer-RescriptBun, package=rescript-bun]",
  "      build.parse_file[module=Bun-RescriptBun, package=rescript-bun]",
  "      build.parse_file[module=BunSqlite-RescriptBun, package=rescript-bun]",
  "      build.parse_file[module=ChildProcess-RescriptBun, package=rescript-bun]",
  "      build.parse_file[module=Cluster-RescriptBun, package=rescript-bun]",
  "      build.parse_file[module=Cookie-RescriptBun, package=rescript-bun]",
  "      build.parse_file[module=CookieMap-RescriptBun, package=rescript-bun]",
  "      build.parse_file[module=Crypto-RescriptBun, package=rescript-bun]",
  "      build.parse_file[module=Dns-RescriptBun, package=rescript-bun]",
  "      build.parse_file[module=Errors-RescriptBun, package=rescript-bun]",
  "      build.parse_file[module=Event-RescriptBun, package=rescript-bun]",
  "      build.parse_file[module=EventEmitter-RescriptBun, package=rescript-bun]",
  "      build.parse_file[module=Exports-RescriptBun, package=rescript-bun]",
  "      build.parse_file[module=Fs-RescriptBun, package=rescript-bun]",
  "      build.parse_file[module=Global-RescriptBun, package=rescript-bun]",
  "      build.parse_file[module=Globals-RescriptBun, package=rescript-bun]",
  "      build.parse_file[module=HTMLRewriter-RescriptBun, package=rescript-bun]",
  "      build.parse_file[module=Http-RescriptBun, package=rescript-bun]",
  "      build.parse_file[module=Http2-RescriptBun, package=rescript-bun]",
  "      build.parse_file[module=Https-RescriptBun, package=rescript-bun]",
  "      build.parse_file[module=Internal__JsTypeReflection-RescriptBun, package=rescript-bun]",
  "      build.parse_file[module=Main-RescriptBun, package=rescript-bun]",
  "      build.parse_file[module=Module-RescriptBun, package=rescript-bun]",
  "      build.parse_file[module=Net-RescriptBun, package=rescript-bun]",
  "      build.parse_file[module=Os-RescriptBun, package=rescript-bun]",
  "      build.parse_file[module=Path-RescriptBun, package=rescript-bun]",
  "      build.parse_file[module=PerfHooks-RescriptBun, package=rescript-bun]",
  "      build.parse_file[module=Process-RescriptBun, package=rescript-bun]",
  "      build.parse_file[module=QueryString-RescriptBun, package=rescript-bun]",
  "      build.parse_file[module=Readline-RescriptBun, package=rescript-bun]",
  "      build.parse_file[module=Redis-RescriptBun, package=rescript-bun]",
  "      build.parse_file[module=SQL-RescriptBun, package=rescript-bun]",
  "      build.parse_file[module=Stream-RescriptBun, package=rescript-bun]",
  "      build.parse_file[module=StringBuffer-RescriptBun, package=rescript-bun]",
  "      build.parse_file[module=StringDecoder-RescriptBun, package=rescript-bun]",
  "      build.parse_file[module=StringEncoding-RescriptBun, package=rescript-bun]",
  "      build.parse_file[module=Test-RescriptBun, package=rescript-bun]",
  "      build.parse_file[module=Timers-RescriptBun, package=rescript-bun]",
  "      build.parse_file[module=Tls-RescriptBun, package=rescript-bun]",
  "      build.parse_file[module=Tty-RescriptBun, package=rescript-bun]",
  "      build.parse_file[module=Types-RescriptBun, package=rescript-bun]",
  "      build.parse_file[module=Url-RescriptBun, package=rescript-bun]",
  "      build.parse_file[module=Util-RescriptBun, package=rescript-bun]",
  "      build.parse_file[module=V8-RescriptBun, package=rescript-bun]",
  "      build.parse_file[module=VM-RescriptBun, package=rescript-bun]",
  "      build.parse_file[module=WithDeps, package=@rewatch-test/with-deps]",
  "      build.parse_file[module=WorkerThreads-RescriptBun, package=rescript-bun]",
  "      build.parse_file[module=Zlib-RescriptBun, package=rescript-bun]",
  "    build.compile",
  "      build.compile_wave[file_count=18]",
  "      build.compile_wave[file_count=7]",
  "      build.compile_wave[file_count=8]",
  "      build.compile_wave[file_count=11]",
  "      build.compile_wave[file_count=4]",
  "      build.compile_wave[file_count=3]",
  "      build.compile_wave[file_count=1]",
  "build.compile_file[module=Assert-RescriptBun, package=rescript-bun, suffix=.mjs, module_system=esmodule, namespace=RescriptBun]",
  "build.compile_file[module=AsyncHooks-RescriptBun, package=rescript-bun, suffix=.mjs, module_system=esmodule, namespace=RescriptBun]",
  "build.compile_file[module=BinaryLike-RescriptBun, package=rescript-bun, suffix=.mjs, module_system=esmodule, namespace=RescriptBun]",
  "build.compile_file[module=Buffer-RescriptBun, package=rescript-bun, suffix=.mjs, module_system=esmodule, namespace=RescriptBun]",
  "build.compile_file[module=Bun-RescriptBun, package=rescript-bun, suffix=.mjs, module_system=esmodule, namespace=RescriptBun]",
  "build.compile_file[module=BunSqlite-RescriptBun, package=rescript-bun, suffix=.mjs, module_system=esmodule, namespace=RescriptBun]",
  "build.compile_file[module=ChildProcess-RescriptBun, package=rescript-bun, suffix=.mjs, module_system=esmodule, namespace=RescriptBun]",
  "build.compile_file[module=Cluster-RescriptBun, package=rescript-bun, suffix=.mjs, module_system=esmodule, namespace=RescriptBun]",
  "build.compile_file[module=Cookie-RescriptBun, package=rescript-bun, suffix=.mjs, module_system=esmodule, namespace=RescriptBun]",
  "build.compile_file[module=CookieMap-RescriptBun, package=rescript-bun, suffix=.mjs, module_system=esmodule, namespace=RescriptBun]",
  "build.compile_file[module=Crypto-RescriptBun, package=rescript-bun, suffix=.mjs, module_system=esmodule, namespace=RescriptBun]",
  "build.compile_file[module=Dns-RescriptBun, package=rescript-bun, suffix=.mjs, module_system=esmodule, namespace=RescriptBun]",
  "build.compile_file[module=Errors-RescriptBun, package=rescript-bun, suffix=.mjs, module_system=esmodule, namespace=RescriptBun]",
  "build.compile_file[module=Event-RescriptBun, package=rescript-bun, suffix=.mjs, module_system=esmodule, namespace=RescriptBun]",
  "build.compile_file[module=EventEmitter-RescriptBun, package=rescript-bun, suffix=.mjs, module_system=esmodule, namespace=RescriptBun]",
  "build.compile_file[module=Exports-RescriptBun, package=rescript-bun, suffix=.mjs, module_system=esmodule, namespace=RescriptBun]",
  "build.compile_file[module=Fs-RescriptBun, package=rescript-bun, suffix=.mjs, module_system=esmodule, namespace=RescriptBun]",
  "build.compile_file[module=Global-RescriptBun, package=rescript-bun, suffix=.mjs, module_system=esmodule, namespace=RescriptBun]",
  "build.compile_file[module=Globals-RescriptBun, package=rescript-bun, suffix=.mjs, module_system=esmodule, namespace=RescriptBun]",
  "build.compile_file[module=HTMLRewriter-RescriptBun, package=rescript-bun, suffix=.mjs, module_system=esmodule, namespace=RescriptBun]",
  "build.compile_file[module=Http-RescriptBun, package=rescript-bun, suffix=.mjs, module_system=esmodule, namespace=RescriptBun]",
  "build.compile_file[module=Http2-RescriptBun, package=rescript-bun, suffix=.mjs, module_system=esmodule, namespace=RescriptBun]",
  "build.compile_file[module=Https-RescriptBun, package=rescript-bun, suffix=.mjs, module_system=esmodule, namespace=RescriptBun]",
  "build.compile_file[module=Internal__JsTypeReflection-RescriptBun, package=rescript-bun, suffix=.mjs, module_system=esmodule, namespace=RescriptBun]",
  "build.compile_file[module=Main-RescriptBun, package=rescript-bun, suffix=.mjs, module_system=esmodule, namespace=RescriptBun]",
  "build.compile_file[module=Module-RescriptBun, package=rescript-bun, suffix=.mjs, module_system=esmodule, namespace=RescriptBun]",
  "build.compile_file[module=Net-RescriptBun, package=rescript-bun, suffix=.mjs, module_system=esmodule, namespace=RescriptBun]",
  "build.compile_file[module=Os-RescriptBun, package=rescript-bun, suffix=.mjs, module_system=esmodule, namespace=RescriptBun]",
  "build.compile_file[module=Path-RescriptBun, package=rescript-bun, suffix=.mjs, module_system=esmodule, namespace=RescriptBun]",
  "build.compile_file[module=PerfHooks-RescriptBun, package=rescript-bun, suffix=.mjs, module_system=esmodule, namespace=RescriptBun]",
  "build.compile_file[module=Process-RescriptBun, package=rescript-bun, suffix=.mjs, module_system=esmodule, namespace=RescriptBun]",
  "build.compile_file[module=QueryString-RescriptBun, package=rescript-bun, suffix=.mjs, module_system=esmodule, namespace=RescriptBun]",
  "build.compile_file[module=Readline-RescriptBun, package=rescript-bun, suffix=.mjs, module_system=esmodule, namespace=RescriptBun]",
  "build.compile_file[module=Redis-RescriptBun, package=rescript-bun, suffix=.mjs, module_system=esmodule, namespace=RescriptBun]",
  "build.compile_file[module=SQL-RescriptBun, package=rescript-bun, suffix=.mjs, module_system=esmodule, namespace=RescriptBun]",
  "build.compile_file[module=Stream-RescriptBun, package=rescript-bun, suffix=.mjs, module_system=esmodule, namespace=RescriptBun]",
  "build.compile_file[module=StringBuffer-RescriptBun, package=rescript-bun, suffix=.mjs, module_system=esmodule, namespace=RescriptBun]",
  "build.compile_file[module=StringDecoder-RescriptBun, package=rescript-bun, suffix=.mjs, module_system=esmodule, namespace=RescriptBun]",
  "build.compile_file[module=StringEncoding-RescriptBun, package=rescript-bun, suffix=.mjs, module_system=esmodule, namespace=RescriptBun]",
  "build.compile_file[module=Test-RescriptBun, package=rescript-bun, suffix=.mjs, module_system=esmodule, namespace=RescriptBun]",
  "build.compile_file[module=Timers-RescriptBun, package=rescript-bun, suffix=.mjs, module_system=esmodule, namespace=RescriptBun]",
  "build.compile_file[module=Tls-RescriptBun, package=rescript-bun, suffix=.mjs, module_system=esmodule, namespace=RescriptBun]",
  "build.compile_file[module=Tty-RescriptBun, package=rescript-bun, suffix=.mjs, module_system=esmodule, namespace=RescriptBun]",
  "build.compile_file[module=Types-RescriptBun, package=rescript-bun, suffix=.mjs, module_system=esmodule, namespace=RescriptBun]",
  "build.compile_file[module=Url-RescriptBun, package=rescript-bun, suffix=.mjs, module_system=esmodule, namespace=RescriptBun]",
  "build.compile_file[module=Util-RescriptBun, package=rescript-bun, suffix=.mjs, module_system=esmodule, namespace=RescriptBun]",
  "build.compile_file[module=V8-RescriptBun, package=rescript-bun, suffix=.mjs, module_system=esmodule, namespace=RescriptBun]",
  "build.compile_file[module=VM-RescriptBun, package=rescript-bun, suffix=.mjs, module_system=esmodule, namespace=RescriptBun]",
  "build.compile_file[module=WithDeps, package=@rewatch-test/with-deps, suffix=.mjs, module_system=esmodule]",
  "build.compile_file[module=WorkerThreads-RescriptBun, package=rescript-bun, suffix=.mjs, module_system=esmodule, namespace=RescriptBun]",
  "build.compile_file[module=Zlib-RescriptBun, package=rescript-bun, suffix=.mjs, module_system=esmodule, namespace=RescriptBun]",
  "rewatch.clean[working_dir=.]",
  "  clean.clean",
  "    packages.make",
  "      build.load_package_sources[package=@rewatch-test/with-deps]",
  "      build.load_package_sources[package=rescript-bun]",
  "    packages.parse_packages",
]
`;

exports[`clean > cleans only the scoped package when run from a subdirectory 1`] = `
[
  "rewatch.build[working_dir=.]",
  "  initialize_build",
  "    packages.make",
  "      build.load_package_sources[package=@rewatch-test/app]",
  "      build.load_package_sources[package=@rewatch-test/library]",
  "      build.load_package_sources[package=rewatch-test-fixture]",
  "    packages.parse_packages",
  "    clean.cleanup_previous_build",
  "  incremental_build[module_count=3]",
  "    build.parse[dirty_modules=3]",
  "      build.parse_file[module=App, package=@rewatch-test/app]",
  "      build.parse_file[module=Library, package=@rewatch-test/library]",
  "      build.parse_file[module=Root, package=rewatch-test-fixture]",
  "    build.compile",
  "      build.compile_wave[file_count=1]",
  "        build.compile_file[module=Library, package=@rewatch-test/library, suffix=.mjs, module_system=esmodule]",
  "      build.compile_wave[file_count=1]",
  "        build.compile_file[module=App, package=@rewatch-test/app, suffix=.mjs, module_system=esmodule]",
  "      build.compile_wave[file_count=1]",
  "        build.compile_file[module=Root, package=rewatch-test-fixture, suffix=.mjs, module_system=esmodule]",
  "rewatch.clean[working_dir=.]",
  "  clean.clean",
  "    packages.make",
  "      build.load_package_sources[package=@rewatch-test/library]",
  "    packages.parse_packages",
]
`;

exports[`clean > does not report compiler update after explicit clean and rebuild 1`] = `
[
  "rewatch.build[working_dir=.]",
  "  initialize_build",
  "    packages.make",
  "      build.load_package_sources[package=@rewatch-test/app]",
  "      build.load_package_sources[package=@rewatch-test/library]",
  "      build.load_package_sources[package=rewatch-test-fixture]",
  "    packages.parse_packages",
  "    clean.cleanup_previous_build",
  "  incremental_build[module_count=3]",
  "    build.parse[dirty_modules=3]",
  "      build.parse_file[module=App, package=@rewatch-test/app]",
  "      build.parse_file[module=Library, package=@rewatch-test/library]",
  "      build.parse_file[module=Root, package=rewatch-test-fixture]",
  "    build.compile",
  "      build.compile_wave[file_count=1]",
  "        build.compile_file[module=Library, package=@rewatch-test/library, suffix=.mjs, module_system=esmodule]",
  "      build.compile_wave[file_count=1]",
  "        build.compile_file[module=App, package=@rewatch-test/app, suffix=.mjs, module_system=esmodule]",
  "      build.compile_wave[file_count=1]",
  "        build.compile_file[module=Root, package=rewatch-test-fixture, suffix=.mjs, module_system=esmodule]",
  "rewatch.clean[working_dir=.]",
  "  clean.clean",
  "    packages.make",
  "      build.load_package_sources[package=@rewatch-test/app]",
  "      build.load_package_sources[package=@rewatch-test/library]",
  "      build.load_package_sources[package=rewatch-test-fixture]",
  "    packages.parse_packages",
  "rewatch.build[working_dir=.]",
  "  initialize_build",
  "    packages.make",
  "      build.load_package_sources[package=@rewatch-test/app]",
  "      build.load_package_sources[package=@rewatch-test/library]",
  "      build.load_package_sources[package=rewatch-test-fixture]",
  "    packages.parse_packages",
  "    clean.cleanup_previous_build",
  "  incremental_build[module_count=3]",
  "    build.parse[dirty_modules=3]",
  "      build.parse_file[module=App, package=@rewatch-test/app]",
  "      build.parse_file[module=Library, package=@rewatch-test/library]",
  "      build.parse_file[module=Root, package=rewatch-test-fixture]",
  "    build.compile",
  "      build.compile_wave[file_count=1]",
  "        build.compile_file[module=Library, package=@rewatch-test/library, suffix=.mjs, module_system=esmodule]",
  "      build.compile_wave[file_count=1]",
  "        build.compile_file[module=App, package=@rewatch-test/app, suffix=.mjs, module_system=esmodule]",
  "      build.compile_wave[file_count=1]",
  "        build.compile_file[module=Root, package=rewatch-test-fixture, suffix=.mjs, module_system=esmodule]",
]
`;
